<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Text Viewer</title>
    <style>
      body {
        background-color: #445566;
        color: #ffffff;
        font-family: "Consolas", "Courier New", monospace;
        padding: 20px;
      }
      h2 {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        border-bottom: 2px solid #88cc88;
        margin-bottom: 20px;
      }
      pre {
        background-color: #333f4f;
        color: #cceecc;
        padding: 15px;
        border-radius: 8px;
        white-space: pre-wrap;
        word-wrap: break-word;
      }
      a {
        color: #aaffaa;
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h2 id="file-title">Text File Viewer</h2>
    <p><a href="index.html">‚Üê Back to Index</a></p>
    <pre id="text-content">Loading...</pre>

    <script>
      const params = new URLSearchParams(window.location.search);
      const file = params.get("file");

      const titleEl = document.getElementById("file-title");
      const contentEl = document.getElementById("text-content");

      if (file) {
        const displayName = decodeURIComponent(
          file
            .split("/")
            .pop()
            .replace(".txt", "")
            .replace(/[_-]/g, " ")
            .replace(/([A-Z])/g, " $1")
            .replace(/\s+/g, " ")
            .trim()
        );
        titleEl.textContent = displayName;

        const rawUrl = `https://raw.githubusercontent.com/BarathKumarB08/BBK_TECH_HUB/main/${file}`;

        fetch(rawUrl)
          .then((response) => {
            if (!response.ok) throw new Error("File not found");
            return response.text();
          })
          .then((text) => {
            contentEl.textContent = text;
          })
          .catch((err) => {
            contentEl.textContent = "Error loading file.";
          });
      } else {
        titleEl.textContent = "No File Specified";
        contentEl.textContent = "Please provide a file name in the URL.";
      }

      // Theme support (same as index.html)
      document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "light") {
          document.body.style.backgroundColor = "#f4f4f4";
          document.body.style.color = "#222";
          const pre = document.querySelector("pre");
          if (pre) {
            pre.style.backgroundColor = "#eeeeee";
            pre.style.color = "#333";
          }
          const link = document.querySelector("a");
          if (link) link.style.color = "#007700";
        }
      });
    </script>
  </body>
</html>
